# Веб-сервис с чат-ботом Телеграм "Выбор рецептов".


Данный проект представляет чат-бот Телеграм и веб-сайт - интерфейс админа 
для взаимодействия с базой данных бота: добавления/редактирования отображаемых рецептов.

"Панель админа" для данного проекта представлена простым веб-сайтом, 
содержащим набор отдельных страниц с формами, предназначенными для внесения 
в базу данных рецептов блюд, необходимых ингредиентов и т.д.

Скрипт чат бота предоставляет реализацию удобного интерфейса 
для взаимодействия с базой блюд и сбора необходимой маркетинговой информации о пользователе.

При использовании данного бота, любой пользователь мессенджера Telegram 
после "регистрации" получает доступ к базе данных кулинарных рецептов.

После активации кнопки "показать блюдо", бот предъявляет пользователю 
случайное блюдо и выбор из опций: "показать рецепт" и "показать ингредиенты". 
Также, пользователь может отметить понравившееся блюдо 
с помощью кнопки "нравится" для того, чтобы система предлагала это блюдо чаще 
или удалить блюдо из выдачи с помощью кнопки "не нравится".


### Как установить

Для локального запуска проекта необходимо загрузить репозиторий на свое устройство.
Python3 и Postgresql уже должны быть установлены.

- Установите виртуальное окружение Python:
```shell
python3 -m venv env
```
и активируйте его командой:
```shell
source env/bin/activate
```

- Используйте pip (или pip3, если есть конфликт с Python2) для установки зависимостей из файла в репозитории: 
```shell 
pip install -r requirements.txt
```

- Необходимо заполнить данные подключения базы данных, в файле config/settings.py
или создать файл `.env` в корневой папке проекта и заполнить его следующими данными: 

```python 
TG_TOKEN=XXX
DEBUG=True
DATABASE_URL=YYY
```
где вам нужно заменить «XXX» и «YYY» соответствующими данными:

+ Вместо ‘XXX’ подставьте API-токен бота Телеграм, полученные с
помощью инструкции по ссылке: https://smmplanner.com/blog/otlozhennyj-posting-v-telegram/ 

+ Вместо 'YYY' следует подставить url-ссылку к БД имеющую вид 
'postgres://{login}:{password}@{url}:{port}/{namr_bd}'

Проект запускается с помощью команды: 
```shell 
python3 run_polling.py 
```

Доступ к панели управления админа производится на локальном сервере по адресу `http://127.0.0.1:8000/`.


### Как использовать
- После запуска скрипта на вашем устройстве, откройте в мобильной или десктопной версии мессенджера Телеграм
чат с настроенным ботом.

- Активируйте бот с помощью кнопки "запустить" или наберите 
в поле тектового ввода `/start` и нажмите "отправить."

- Бот, запущенный впервые, попросит вас написать и отправить ваше имя, номер телефона и емейл.
Эта информация необходима для регистрации в базе данных.

- После того, как регистрация будет пройдена, следует нажать на кнопку "Показать блюдо" 
или отправить боту команду `/menu`

- Далее, с помощью появившихся кнопок вы можете выполнить следующие действия:
  + "Следующее блюдо" - бот предлагает для ознакомления случайное блюдо из БД.
  + "Показать рецепт" - Просмотр рецепта приготовления блюда в текстовом формате.
  + "Показать ингредиенты" - Просмотр состава текущего рецепта 
  и количество необходимых для приготовления ингредиентов в текстовом формате.
  + "Закрыть" - Завершение работы программы

### Цель проекта
Код был написан в образовательных целях в онлайн-курсе для веб-разработчиков dvmn.org
